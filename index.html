<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Friendship Day üíô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #60a5fa, #dbeafe);
    }
    #app {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    #content {
      position: relative;
      z-index: 10;
      width: 100%;
      min-height: 100vh;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }
    .step {
      position: absolute;
      width: 100%;
      max-width: 900px;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.509);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
    }
    .step.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }
    #progress-container {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 400px;
      height: 6px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
      z-index: 100;
    }
    #progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #3b82f6, #2563eb);
      border-radius: 3px;
      transition: width 0.5s ease;
    }
    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .fade {
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    .fade.show {
      opacity: 1;
    }

  </style>
</head>
<body>
  <div id="app">
    <div id="canvas-container"></div>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="content">

      <!-- Step 1 -->
      <div class="step active" id="step1">
        <h1 class="text-3xl md:text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500">Happy Friendship Day!</h1>
        <p class="text-lg text-gray-700 mb-6">Here‚Äôs something cool just for you üíô</p>
        <button class="bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-full font-semibold" id="start-btn">Start</button>
      </div>

      <!-- Step 2 -->
      <div class="step" id="step2">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500">To My Legendary Friendsüõ°Ô∏è</h2>
        <p class="text-base text-gray-700 mb-6">You're the brothers I got to choose. Through all ups and downs, you're always there.</p>
        <div class="flex gap-4 justify-center">
          <button class="bg-gray-300 text-gray-800 px-6 py-2 rounded-full font-semibold" id="back-btn-2">‚¨Ö Back</button>
          <button class="bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-full font-semibold" id="next-btn-2">Next</button>
        </div>
      </div>

      <!-- Step 3: Mixed Slideshow -->
      <div class="step" id="step3">
        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500">Flashbacks üì∏ + üé•</h2>
        <div class="relative w-full max-w-2xl mx-auto">
          <div class="overflow-hidden rounded-lg shadow-lg">
            <img id="slideshow-img" class="fade hidden w-full h-auto object-cover" />
            <video id="slideshow-video" class="fade hidden w-full h-auto object-cover" autoplay muted loop></video>
          </div>
        </div>
        <p class="text-sm text-gray-600 italic mt-4">Moments worth remembering...</p>
        <div class="flex gap-4 justify-center mt-6">
          <button class="bg-gray-300 text-gray-800 px-6 py-2 rounded-full font-semibold" id="back-btn-3">‚¨Ö Back</button>
          <button class="bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-full font-semibold" id="next-btn-3">Next</button>
        </div>
      </div>

      <!-- Step 4 -->
      <div class="step" id="step4">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500">Epic Moments Together</h2>
        <div class="flex flex-col md:flex-row gap-4 items-center justify-center">
          <video controls class="w-full md:w-1/2 rounded-lg shadow-md">
            <source src="VID-20241207-WA0015.mp4" type="video/mp4" />
          </video>
          <video controls class="w-full md:w-1/2 rounded-lg shadow-md">
            <source src="VID-20250505-WA0052.mp4" type="video/mp4" />
          </video>
        </div>
        <p class="text-sm text-gray-600 italic mt-4">Legendary vibes only üéÆ</p>
        <div class="flex gap-4 justify-center mt-6">
          <button class="bg-gray-300 text-gray-800 px-6 py-2 rounded-full font-semibold" id="back-btn-4">‚¨Ö Back</button>
          <button class="bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-full font-semibold" id="next-btn-4">Final Note</button>
        </div>
      </div>

      <!-- Step 5 -->
      <div class="step" id="step5">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-500">Here‚Äôs to Us</h2>
        <p class="text-base text-gray-700 mb-6">Thanks for being real ones. More jokes, games, and deep talks to come! Happy Friendship Day, brothers!</p>
        <div class="flex gap-4 justify-center">
          <button class="bg-gray-300 text-gray-800 px-6 py-2 rounded-full font-semibold" id="back-btn-5">‚¨Ö Back</button>
          <button class="bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-full font-semibold animate-pulse" id="confetti-btn">Celebrate!</button>
        </div>
      </div>

    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const renderer = new THREE.WebGLRenderer({ alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.getElementById("canvas-container").appendChild(renderer.domElement);
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
      camera.position.z = 5;
      (function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      })();

      let currentStep = 1;
      const totalSteps = 5;
      function showStep(step) {
        document.querySelectorAll(".step").forEach(el => el.classList.remove("active"));
        document.getElementById(`step${step}`)?.classList.add("active");
        document.getElementById("progress-bar").style.width = `${((step - 1) / (totalSteps - 1)) * 100}%`;
      }

      const nextButtons = ["start-btn", "next-btn-2", "next-btn-3", "next-btn-4"];
      const backButtons = ["back-btn-2", "back-btn-3", "back-btn-4", "back-btn-5"];

      nextButtons.forEach(id => {
        document.getElementById(id)?.addEventListener("click", () => showStep(++currentStep));
      });

      backButtons.forEach(id => {
        document.getElementById(id)?.addEventListener("click", () => showStep(--currentStep));
      });

      document.getElementById("confetti-btn")?.addEventListener("click", () => {
        confetti({ particleCount: 200, spread: 70, origin: { y: 0.6 }, colors: ['#3b82f6', '#2563eb', '#60a5fa'] });
      });

      // Slideshow logic (78 items: first 60 images, last 18 videos)
     const slideshowMedia = Array.from({ length: 79 }, (_, i) =>
    i < 60 ? `slide${i + 1}.jpg` : `slide${i + 1}.mp4`
  );

  let currentSlideIndex = 0;
  const imgEl = document.getElementById("slideshow-img");
  const videoEl = document.getElementById("slideshow-video");
  let slideshowTimer;

  function showMedia(index) {
    const file = slideshowMedia[index];
    const isVideo = file.endsWith(".mp4");

    clearTimeout(slideshowTimer);

    imgEl.classList.remove("show");
    videoEl.classList.remove("show");

    if (isVideo) {
    imgEl.classList.add("hidden");
    videoEl.src = file;
    videoEl.classList.remove("hidden");
    void videoEl.offsetWidth; // Trigger reflow for animation
    videoEl.classList.add("show");

    videoEl.play();
    videoEl.onended = () => {
      currentSlideIndex = (currentSlideIndex + 1) % slideshowMedia.length;
      showMedia(currentSlideIndex);
    };
  } else {
    videoEl.pause();
    videoEl.classList.add("hidden");
    imgEl.src = file;
    imgEl.classList.remove("hidden");
    void imgEl.offsetWidth;
    imgEl.classList.add("show");

    slideshowTimer = setTimeout(() => {
      currentSlideIndex = (currentSlideIndex + 1) % slideshowMedia.length;
      showMedia(currentSlideIndex);
    }, 2000);
  }
}

  showMedia(currentSlideIndex);
    });
  </script>
</body>
</html>
